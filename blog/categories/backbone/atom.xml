<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: backbone | NoMethodError]]></title>
  <link href="http://nomethoderror.com//blog/categories/backbone/atom.xml" rel="self"/>
  <link href="http://nomethoderror.com//"/>
  <updated>2015-05-21T22:11:08-05:00</updated>
  <id>http://nomethoderror.com//</id>
  <author>
    <name><![CDATA[Travis Roberts]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Track Backbone.js Page Views with Google Analytics]]></title>
    <link href="http://nomethoderror.com//blog/2013/11/19/track-backbone-dot-js-page-views-with-google-analytics/"/>
    <updated>2013-11-19T19:42:00-06:00</updated>
    <id>http://nomethoderror.com//blog/2013/11/19/track-backbone-dot-js-page-views-with-google-analytics</id>
    <content type="html"><![CDATA[<p>Google Analytics tracks page views based on evaluating the tracking code on page load. Backbone.js makes this difficult because the page never reloads. Fortunately, it&rsquo;s super easy to add a function to the Backbone router to manually track each route.</p>

<h2>Newer Analytics Code</h2>

<p>If your tracking code looks like below, then you have the newer Analytics tracking code that uses the <code>ga</code> function instead of the <code>_gaq</code> array.</p>

<p><div><script src='https://gist.github.com/9d05cb3d9c6d90408325.js?file=analytics_new.js'></script>
<noscript><pre><code>(function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,&#39;script&#39;,&#39;//www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;);

ga(&#39;create&#39;, &#39;UA-0000000-1&#39;, &#39;mysite.com&#39;);
ga(&#39;send&#39;, &#39;pageview&#39;);</code></pre></noscript></div>
</p>

<p>Add the following code to your router:</p>

<p><div><script src='https://gist.github.com/9d05cb3d9c6d90408325.js?file=router_new.js'></script>
<noscript><pre><code>initialize: function() {
  this.bind(&#39;route&#39;, this._pageView);
},

_pageView: function() {
  var path = Backbone.history.getFragment();
  ga(&#39;send&#39;, &#39;pageview&#39;, {page: path});
}</code></pre></noscript></div>
</p>

<h2>Old Analytics Code</h2>

<p>If your tracking code looks like this:</p>

<p><div><script src='https://gist.github.com/9d05cb3d9c6d90408325.js?file=analytics_old.js'></script>
<noscript><pre><code>var _gaq = _gaq || [];
_gaq.push([&#39;_setAccount&#39;, &#39;UA-0000000-1&#39;]);
_gaq.push([&#39;_trackPageview&#39;]);

(function() {
  var ga = document.createElement(&#39;script&#39;);
      ga.type = &#39;text/javascript&#39;;
      ga.async = true;
      ga.src = (&#39;https:&#39; == document.location.protocol ? &#39;https://ssl&#39; : &#39;http://www&#39;) + &#39;.google-analytics.com/ga.js&#39;;
  var s = document.getElementsByTagName(&#39;script&#39;)[0];
      s.parentNode.insertBefore(ga, s);
})();</code></pre></noscript></div>
</p>

<p>Add the following code to your router:</p>

<p><div><script src='https://gist.github.com/9d05cb3d9c6d90408325.js?file=router_old.js'></script>
<noscript><pre><code>initialize: function() {
  this.bind(&#39;route&#39;, this._pageView);
},

_pageView: function() {
  var path = Backbone.history.getFragment();
  _gaq.push([&#39;_trackPageview&#39;, &quot;/&quot; + path])
}</code></pre></noscript></div>
</p>
]]></content>
  </entry>
  
</feed>
